version: '3.8'

services:
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    restart: unless-stopped
    ports:
      - "5555:5555"
    volumes:
      - ./frontend:/app/frontend

  backend:
    image: openjdk:17-jdk-slim
    build:
      context: ./backend
      dockerfile: Dockerfile
    volumes:
      - ./backend:/app/backend
    command: ["java", "-jar", "/target/api-0.0.1-SNAPSHOT.jar"]
    ports:
      - "5556:5556"
    environment:
      - SPRING_PROFILES_ACTIVE=development
    #restart: always

  database:
    image: mcr.microsoft.com/mssql/server:2019-latest
    ports:
      - "5557:5557"
    environment:
      - ACCEPT_EULA=Y
      - SA_PASSWORD=vEU5cmyD4C2HPbG8FjNzTR
